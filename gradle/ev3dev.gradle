def ev3devGroup = "Ev3dev management"

task stopBluetooth << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl stop bluetooth")
        }
    }
}

task restartBluetooth << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl restart bluetooth")
        }
    }
}

task stopNtp << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl stop ntp")
        }
    }
}

task restartNtp << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl restart ntp")
        }
    }
}


task stopNmbd << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl stop nmbd")
        }
    }
}

task restartNmbd << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl restart nmbd")
        }
    }
}


task stopBrickman << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl stop brickman")
        }
    }
}

task restartBrickman << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo systemctl restart brickman")
        }
    }
}

task getDebianDistro << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "cat /etc/os-release")
        }
    }
}


task free {
    group ev3devGroup
    doLast {
        ssh.run {
            session(remotes.ev3dev) {
                sshPrint(delegate, "free")
            }
        }
    }
}

task ps {
    group ev3devGroup
    doLast {
        ssh.run {
            session(remotes.ev3dev) {
                sshPrint(delegate, "ps aux | sort -n -k 4 ")
            }
        }
    }
}

task shutdown << {
    group ev3devGroup
    ssh.run {
        session(remotes.ev3dev) {
            sshPrint(delegate, "echo -e \"${project.brickPassword}\" | sudo -S sudo shutdown -h now")
        }
    }
}

task ev3devInfo {
    group ev3devGroup
    doLast {
        ssh.run {
            session(remotes.ev3dev) {
                sshPrint(delegate, "ev3dev-sysinfo -m")
            }
        }
    }
}